<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Qcustomplot之修改颜色</title>
      <link href="/2023/04/04/Qcustomplor%E4%B9%8B%E4%BF%AE%E6%94%B9%E9%A2%9C%E8%89%B2/"/>
      <url>/2023/04/04/Qcustomplor%E4%B9%8B%E4%BF%AE%E6%94%B9%E9%A2%9C%E8%89%B2/</url>
      
        <content type="html"><![CDATA[<p>图像的颜色修改, 控件的颜色修改</p><span id="more"></span><h2 id="Palette类型"><a href="#Palette类型" class="headerlink" title="Palette类型"></a>Palette类型</h2><blockquote><p>改变控件颜色</p></blockquote><ul><li><p>先获取控件</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QPalette plet = line_[i].choose_color-&gt;<span class="built_in">palette</span>();</span><br></pre></td></tr></table></figure></li><li><p>修改控件颜色</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plet.<span class="built_in">setColor</span> (QPalette::Button, color)<span class="comment">// color 为 QColor类型</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="QPen"><a href="#QPen" class="headerlink" title="QPen"></a>QPen</h2><blockquote><p>图像颜色修改</p></blockquote><ul><li>直接修改掉QPen的变量即可, 直接对图像进行颜色赋值</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pen.<span class="built_in">setColor</span> (data_pool_.<span class="built_in">at</span>(i),color);</span><br><span class="line">ui_chart_-&gt;widget-&gt;<span class="built_in">graph</span>(i)-&gt;<span class="built_in">setPen</span>(pen);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">QPalette plet = line_info_[i].choose_color-&gt;<span class="built_in">palette</span>();</span><br><span class="line">QColor currentColor = plet.<span class="built_in">color</span>(QPalette::Button);    <span class="comment">// 当前颜色</span></span><br><span class="line">QColor color = QColorDialog::<span class="built_in">getColor</span>(currentColor, <span class="keyword">this</span>,(<span class="string">&quot;颜色选择&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (color.<span class="built_in">isValid</span>())&#123;</span><br><span class="line">    plet.<span class="built_in">setColor</span> (QPalette::Button, color);</span><br><span class="line">    line_info_[i].choose_color-&gt;<span class="built_in">setPalette</span> (plet);</span><br><span class="line">    data_pool_[i].line_color = color;<span class="comment">// 这句话好像可以删掉</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 改变图像属性</span></span><br><span class="line">    QPen pen;</span><br><span class="line">    pen.<span class="built_in">setWidth</span>(data_pool_.<span class="built_in">at</span>(i).line_width);<span class="comment">//设置线宽,默认是2</span></span><br><span class="line">    pen.<span class="built_in">setColor</span>(data_pool_.<span class="built_in">at</span>(i).line_color);<span class="comment">//设置线条红色</span></span><br><span class="line">    ui_chart_-&gt;widget-&gt;<span class="built_in">graph</span>(i)-&gt;<span class="built_in">setPen</span>(pen);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> QT </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clion与QT的那些事</title>
      <link href="/2023/03/13/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85QT%E7%89%88%E6%9C%AC%E5%BC%83%E5%AD%90/"/>
      <url>/2023/03/13/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85QT%E7%89%88%E6%9C%AC%E5%BC%83%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<p>因为QT6很多库已经放弃了，所以开发要用到旧版，找了很久才找到。</p><span id="more"></span><h2 id="QT的在线安装程序，最低版本已经去到了v5-15，虽然区别不大，但还是统一开发环境比较好。"><a href="#QT的在线安装程序，最低版本已经去到了v5-15，虽然区别不大，但还是统一开发环境比较好。" class="headerlink" title="QT的在线安装程序，最低版本已经去到了v5.15，虽然区别不大，但还是统一开发环境比较好。"></a>QT的在线安装程序，最低版本已经去到了v5.15，虽然区别不大，但还是统一开发环境比较好。</h2><blockquote><p>QT老版本下载: <a href="https://download.qt.io/archive/qt/">qtdownload</a></p><p>QT论坛: <a href="https://forum.qt.io/">Qt Forum</a></p></blockquote><h2 id="QT在线安装器加载源的问题"><a href="#QT在线安装器加载源的问题" class="headerlink" title="QT在线安装器加载源的问题"></a>QT在线安装器加载源的问题</h2><p>​问题：1. 添加的源用不了2. 官方的源用不了</p><blockquote><p>使用终端打开安装器, 在后面加上  –mirror <a href="https://mirrors.aliyun.com/qt">https://mirrors.aliyun.com/qt</a></p><p>如 .\qt_online.exe –mirror <a href="https://mirrors.aliyun.com/qt">https://mirrors.aliyun.com/qt</a></p></blockquote><h2 id="用Clion开发QT"><a href="#用Clion开发QT" class="headerlink" title="用Clion开发QT"></a>用Clion开发QT</h2><ol><li><p>正常下载好QT, 创建好项目并且可以运行</p><blockquote><p>QT安装可以用在线工具, 也可以下载离线安装包</p><p>安装的时候, 一定要选编译器(上下都要选)…</p></blockquote></li><li><p>Clion中配置好QT的工具链</p></li></ol><blockquote><p>在Tools chain中添加QT的debug, 把qt&#x2F;Tools&#x2F;5.12.12&#x2F;Mingw 添加上去</p></blockquote><p><img src="https://s1.ax1x.com/2023/03/14/ppl2V3V.png"></p><h2 id="关于windows环境变量"><a href="#关于windows环境变量" class="headerlink" title="关于windows环境变量"></a>关于windows环境变量</h2><p>添加完环境变量，一定要重启！！！（除非你用在cmd用命令添加的）</p><h2 id="Clion编译QT程序的问题"><a href="#Clion编译QT程序的问题" class="headerlink" title="Clion编译QT程序的问题"></a>Clion编译QT程序的问题</h2><ol><li>找不到qt-config.cmake</li></ol><blockquote><p>在CMake.list程序里面，添加上set(CMAKE_PREFIX_PATH “E:\\QT\\5.12.11\\mingw73_64\\lib\\cmake\\Qt5”)</p><p>此处改为自己的路径</p></blockquote><ol start="2"><li>找不到对应的库，比如说这次(qserialport)</li></ol><blockquote><p>先去找官网或者别的地方找，看看每个版本之间的差异，可能版本的迭代把某些模块删掉了。</p></blockquote><ol start="3"><li><p>Clion编译通过了，但是运行报错-1073741515 (0xC0000135)</p><blockquote><p>运行失败，这个报错是没有链接到动态链接库dll的原因，在系统环境变量中加上qt的编译路径，如：</p><p><img src="https://s1.ax1x.com/2023/03/14/pplsbRO.png"></p></blockquote></li></ol><p>最后一定要重启!!!</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>装软件一定要考虑团队的版本问题, 还有安装时所带的资料库</li><li>windows环境变量设置完之后, 一定要重启电脑</li><li>网上搜教程的同时, 也要去官方论坛看看, bing国际版</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> QT </tag>
            
            <tag> Install </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QT修改槽函数，lambda表达，正则表达</title>
      <link href="/2023/03/09/QT%E4%BF%AE%E6%94%B9%E6%A7%BD%E5%87%BD%E6%95%B0%EF%BC%8Clambda%E8%A1%A8%E8%BE%BE%EF%BC%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE/"/>
      <url>/2023/03/09/QT%E4%BF%AE%E6%94%B9%E6%A7%BD%E5%87%BD%E6%95%B0%EF%BC%8Clambda%E8%A1%A8%E8%BE%BE%EF%BC%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE/</url>
      
        <content type="html"><![CDATA[<p>QT自定义信号，修改槽函数，lambda表达式，正则表达</p><span id="more"></span><h2 id="修改槽函数"><a href="#修改槽函数" class="headerlink" title="修改槽函数"></a>修改槽函数</h2><ol><li>在private slots 里面添加自定义函数声明，其它的按照官方操作就行</li><li>在widget.cpp 里面写connect函数</li></ol><p>函数原型：</p><p>static QMetaObject::Connection connect(const QObject *sender, const char *signal, const QObject *receiver, const char *member, Qt::ConnectionType &#x3D; Qt::AutoConnection);</p><blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QObject::<span class="built_in">connect</span>(信号的发送者，发送的信号，槽函数所在的类，自定义接收的槽函数)</span><br><span class="line">eg：</span><br><span class="line">    QObject::<span class="built_in">connect</span>(ui-&gt;commit,&amp;QPushButton::clicked,<span class="keyword">this</span>,&amp;Widget::botton);  <span class="comment">//QT5规范</span></span><br><span class="line">QObject::<span class="built_in">connect</span>(ui-&gt;commit,<span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>(),<span class="keyword">this</span>,<span class="built_in">SLOT</span>(<span class="built_in">botton</span>()));      <span class="comment">//QT4规范</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><h3 id="自定义信号"><a href="#自定义信号" class="headerlink" title="自定义信号"></a>自定义信号</h3><p><a href="http://c.biancheng.net/view/9429.html">Qt自定义信号和槽函数</a></p><h2 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h2><p>通过lambada表达式，实现匿名函数的方法。在connect 使用匿名函数不能用QT4规范。</p><p>lambda捕获列表：</p><ul><li><p>[var]表示值传递方式捕捉变量var；</p></li><li><p>[&#x3D;]表示值传递方式捕捉所有父作用域的变量（包括this）；</p></li><li><p>[&amp;var]表示引用传递捕捉变量var；</p></li><li><p>[&amp;]表示引用传递方式捕捉所有父作用域的变量（包括this）；</p><blockquote><p>在QT中, 虽然是传地址, 但是修改了原来变量的值, 但是新的变量值不变, 实现了一部分传值, 一部分传地址</p></blockquote></li><li><p>[this]表示值传递方式捕捉当前的this指针。<br>上面提到了一个父作用域，也就是包含Lambda函数的语句块，说通俗点就是包含Lambda的“{}”代码块。上面的捕捉列表还可以进行组合，例如：</p><ul><li><p>[&#x3D;,&amp;a,&amp;b]表示以引用传递的方式捕捉变量a和b，以值传递方式捕捉其它所有变量;</p></li><li><p>[&amp;,a,this]表示以值传递的方式捕捉变量a和this，引用传递方式捕捉其它所有变量。<br>不过值得注意的是，捕捉列表不允许变量重复传递。下面一些例子就是典型的重复，会导致编译时期的错误。例如：</p></li><li><p>[&#x3D;,a]这里已经以值传递方式捕捉了所有变量，但是重复捕捉a了，会报错的;</p></li><li><p>[&amp;,&amp;this]这里&amp;已经以引用传递方式捕捉了所有变量，再捕捉this也是一种重复。</p></li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QObject::<span class="built_in">connect</span>(信号的发送者，发送的信号，槽函数所在的类，[捕获列表](信号里有的变量))</span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;commit,&amp;QPushButton::clicked,<span class="keyword">this</span>,[=]&#123;</span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;This is lambda&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="小问题"><a href="#小问题" class="headerlink" title="小问题"></a>小问题</h3><blockquote><ol><li>使用lambda的时候, 用cennect三个参数的重载, 会被clazy警告, 要用四个参数的重载</li><li>写了lambda表达式之后，slots那里已经不需要写任何东西</li></ol></blockquote><h2 id="QT的正则表达"><a href="#QT的正则表达" class="headerlink" title="QT的正则表达"></a>QT的正则表达</h2><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QRegularExpression&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">QRegularExpression <span class="title">regexp_int</span><span class="params">(<span class="string">&quot;^[0-9]+$&quot;</span>)</span></span>;   <span class="comment">// int</span></span><br><span class="line"><span class="function">QRegularExpression <span class="title">regexp_float</span><span class="params">(<span class="string">&quot;^[0-9]+\\.[0-9]+$&quot;</span>)</span></span>;   <span class="comment">// float匹配浮点数,要用两个\\转义.</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> valid = regexp_int.<span class="built_in">isValid</span>();<span class="comment">// 判断正则表达是否合法</span></span><br><span class="line"></span><br><span class="line">QString pattern = regexp.<span class="built_in">pattern</span>();<span class="comment">// 返回正则表达式</span></span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; pattern;</span><br><span class="line"></span><br><span class="line">QRegularExpressionMatch number = regexp_int.<span class="built_in">match</span>(<span class="string">&quot;abdc 12&quot;</span>);<span class="comment">// 匹配出符合的结果</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> hasMatch = number.<span class="built_in">hasMatch</span>(); <span class="comment">// 是否匹配成功</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; hasMatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (number.<span class="built_in">hasMatch</span>())&#123;</span><br><span class="line">    QString numbers = number.<span class="built_in">captured</span>(<span class="number">0</span>);<span class="comment">// 获取正则匹配结果 </span></span><br><span class="line">    <span class="comment">// 还有 captured(1) captured(2)</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; numbers;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;hasnt enough match&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>后面需要用到再查手册</p>]]></content>
      
      
      
        <tags>
            
            <tag> QT </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git高阶用法</title>
      <link href="/2023/03/06/git%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
      <url>/2023/03/06/git%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>git 的基本操作，参考 <a href="http://t.csdn.cn/1QW3G">git技能树</a></p><span id="more"></span><h2 id="基操"><a href="#基操" class="headerlink" title="基操"></a>基操</h2><blockquote><p>以下文件均用变量 FILE 表示</p></blockquote><h3 id="比较变动"><a href="#比较变动" class="headerlink" title="比较变动"></a>比较变动</h3><blockquote><p>查看相对于上一次暂存修改了什么</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff FILE</span><br></pre></td></tr></table></figure><h3 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h3><blockquote><p>输出信息太多, 在后面加上 –pretty&#x3D;online</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=online</span><br></pre></td></tr></table></figure><blockquote><p>查看所有的commit记录</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><h3 id="查看时间线"><a href="#查看时间线" class="headerlink" title="查看时间线"></a>查看时间线</h3><blockquote><p>查看历史提交的时间线</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git lg</span><br></pre></td></tr></table></figure><h3 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h3><blockquote><p>在git 中, 当前版本表示HEAD, 上一个版本为HEAD^, 上上个版本为HEAD^^, 依此类推, 100个写成HEAD~100</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure><h3 id="git重置"><a href="#git重置" class="headerlink" title="git重置"></a>git重置</h3><blockquote><p>相当于撤销命令</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reflog#查看用过的命令</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">找到想要撤回到的命令前面的<span class="built_in">id</span></span></span><br><span class="line">git reflog --hard (e55063a)#这里填自己命令id</span><br></pre></td></tr></table></figure><h3 id="git-log-和-git-reflog"><a href="#git-log-和-git-reflog" class="headerlink" title="git log 和 git reflog"></a>git log 和 git reflog</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git log # 查看commit过的信息</span><br><span class="line">git reflog# 查看用过的命令</span><br><span class="line">git reset --hard commit_id# 回到该版本</span><br><span class="line">git reset --hard cmd_id# 回到用这条命令前的状态</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地reset之后，要push上去，远程仓库才能一起回退</span></span><br></pre></td></tr></table></figure><h3 id="取消暂存文件"><a href="#取消暂存文件" class="headerlink" title="取消暂存文件"></a>取消暂存文件</h3><blockquote><p>移除部分在暂存区的文件, 有些命令可以在 git status 中看到</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD FILE</span><br></pre></td></tr></table></figure><h3 id="恢复文件"><a href="#恢复文件" class="headerlink" title="恢复文件"></a>恢复文件</h3><blockquote><p>将文件恢复为上一次提交的样子</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- FILE</span><br></pre></td></tr></table></figure><h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><blockquote><p>两种情况: 误删, 想要恢复。彻底删除</p></blockquote><p>误删( 前提是版本库里面存在 )</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- FILE # 跟上面同理</span><br></pre></td></tr></table></figure><p>彻底删除</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">先在本地删除, 然后才删除版本库里面的</span></span><br><span class="line">git rm FILE</span><br></pre></td></tr></table></figure><p>删除远程仓库文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将远程仓库里面的项目文件拉下来，然后可通过<span class="built_in">dir</span>命令行查看有哪些文件夹</span></span><br><span class="line">git pull origin master</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件(如“动画demo.md‘)或者文件夹</span></span><br><span class="line">git rm --cached “文件”/git rm -r --cached &quot;文件夹’</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将删除操作提交到git仓库</span></span><br><span class="line">git commit -m “操作说明”</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将本次修改更新到github远程仓库</span></span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这个删除对本地是没影响的,只是针对git本地库和远程库</span></span><br></pre></td></tr></table></figure><h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><blockquote><p>以下表示: 分支默认用dev</p></blockquote><h3 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch dev</span><br><span class="line">git branch -a # 查看本地分支以及远程分支</span><br></pre></td></tr></table></figure><h3 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">git checkout dev 已经过时了</span></span><br><span class="line">git switch dev</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建和切换结合起来</span></span><br><span class="line">git switch -c dev</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将远程分支更新到本地（好像不能成功）</span></span><br><span class="line">git remote update origin --prune</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="指定分支下载"><a href="#指定分支下载" class="headerlink" title="指定分支下载"></a>指定分支下载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b branch_name git@git...</span><br></pre></td></tr></table></figure><h2 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push origin --delete branch_name# 删除远程</span><br><span class="line">git branch -d branch_name   # 删除本地</span><br></pre></td></tr></table></figure><h2 id="分支管理策略"><a href="#分支管理策略" class="headerlink" title="分支管理策略"></a>分支管理策略</h2><blockquote><ul><li><p>通常合并分支的时候, 会采用Fast forward 模式, 这种模式下, 删除分支后相关的信息也会删除</p></li><li><p>如果禁用了这种模式, merge的时候会生成新的commit信息, 在历史上就能查到分支信息</p></li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --no-ff -m &quot;merge with no-ff&quot; dev # 这里加上了-m, 因为要产生新的commit信息</span><br></pre></td></tr></table></figure><h3 id="bug分支"><a href="#bug分支" class="headerlink" title="bug分支"></a>bug分支</h3><blockquote><p>工作到一半, 工作区还有东西, 同时还要改bug的情况</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git stash# 把当前的工作区储存起来</span><br><span class="line">git stash list # 查看储存的工作区</span><br><span class="line">git stash apply (id) # 仅恢复工作区,当多个stash的时候,写id</span><br><span class="line">git stash drop# 删除储存的工作区</span><br><span class="line">git stash pop # 恢复的同时,删除储存的工作区</span><br></pre></td></tr></table></figure><ul><li>同一个bug, 在两个不同的分支, 改完bug, 可以复刻特定的提交到其它分支</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick (id) # id填commit bug时候的id</span><br></pre></td></tr></table></figure><h3 id="feature分支"><a href="#feature分支" class="headerlink" title="feature分支"></a>feature分支</h3><h3 id="加速访问"><a href="#加速访问" class="headerlink" title="加速访问"></a>加速访问</h3><ol><li>steam++</li><li>uu加速器</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu20.04安装ROS</title>
      <link href="/2023/02/27/Ubuntu20-04%E5%AE%89%E8%A3%85ROS/"/>
      <url>/2023/02/27/Ubuntu20-04%E5%AE%89%E8%A3%85ROS/</url>
      
        <content type="html"><![CDATA[<p>Ubuntu20.04安装ROS基本步骤，遇到的问题，小乌龟测试。ROS系统目前流行有两个版本：noetic和melodic。还有很多ROS发行版。</p><span id="more"></span><h2 id="安装ROS"><a href="#安装ROS" class="headerlink" title="安装ROS"></a>安装ROS</h2><h3 id="添加软件包路径"><a href="#添加软件包路径" class="headerlink" title="添加软件包路径"></a>添加软件包路径</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c &#x27;echo &quot;deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#x27;</span><br></pre></td></tr></table></figure><h3 id="设置ROS版本密钥（哪里拿的还不知道）"><a href="#设置ROS版本密钥（哪里拿的还不知道）" class="headerlink" title="设置ROS版本密钥（哪里拿的还不知道）"></a>设置ROS版本密钥（哪里拿的还不知道）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install curl #安装curl工具</span><br><span class="line">curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654</span><br></pre></td></tr></table></figure><h3 id="安装、初始化环境变量"><a href="#安装、初始化环境变量" class="headerlink" title="安装、初始化环境变量"></a>安装、初始化环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update#更新一下源</span><br><span class="line">sudo apt install ros-noetic-desktop-full#安装ROS完全版</span><br><span class="line">source /opt/ros/noetic/setup.bash</span><br><span class="line">echo &quot;source /opt/ros/noetic/setup.bash&quot; &gt;&gt; ~/.bashrc</span><br><span class="line">source ~/.bashrc#均为配置环境变量</span><br></pre></td></tr></table></figure><h3 id="安装各种依赖包"><a href="#安装各种依赖包" class="headerlink" title="安装各种依赖包"></a>安装各种依赖包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3-rosdep python3-rosinstall python3-rosinstall-generator python3-wstool build-essential#安装各种依赖包</span><br></pre></td></tr></table></figure><h3 id="管理各种工具的软件"><a href="#管理各种工具的软件" class="headerlink" title="管理各种工具的软件"></a>管理各种工具的软件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3-rosdep#安装管理工具</span><br></pre></td></tr></table></figure><h3 id="初始化rosdep（先别执行这里，先看下去）"><a href="#初始化rosdep（先别执行这里，先看下去）" class="headerlink" title="初始化rosdep（先别执行这里，先看下去）"></a>初始化rosdep（先别执行这里，先看下去）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rosdep init</span><br><span class="line">rosdep update</span><br></pre></td></tr></table></figure><h3 id="替换rosdep相关链接"><a href="#替换rosdep相关链接" class="headerlink" title="替换rosdep相关链接"></a>替换rosdep相关链接</h3><blockquote><p>因为某些链接,在国内被屏蔽了,所以不能初始化成功. 下面需要手动配置链接.</p></blockquote><p>手动克隆文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/ros/noetic/#一定要切换到这个目录</span><br><span class="line">git clone https://github.com/ros/rosdistro.git#克隆ros官方文件</span><br></pre></td></tr></table></figure><p>需要修改的文件有:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/opt/ros/noetic/rosdistro/rosdep/sources.list.d/20-default.list#跟下面的不一样</span><br><span class="line"></span><br><span class="line">/usr/lib/python3/dist-packages/rosdep2/gbpdistro_support.py</span><br><span class="line"></span><br><span class="line">/usr/lib/python3/dist-packages/rosdep2/rep3.py</span><br><span class="line"></span><br><span class="line">/usr/lib/python3/dist-packages/rosdistro/__init__.py</span><br><span class="line"></span><br><span class="line">/etc/ros/rosdep/sources.list.d/20-default.list#别以为是一样的</span><br></pre></td></tr></table></figure><p>修改详情请看:<a href="!https://zhuanlan.zhihu.com/p/515361781">Ubuntu20.04.4安装ROS Noetic详细教程</a></p><h3 id="安装遇到的问题"><a href="#安装遇到的问题" class="headerlink" title="安装遇到的问题"></a>安装遇到的问题</h3><ol><li>rosdep初始化失败问题：国内屏蔽了下载链接</li><li>运行小乌龟键盘控制不了：鼠标要选中控制节点的那个窗口，而不是选中小乌龟的窗口</li></ol><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><strong>ROS-wiki</strong> <a href="http://wiki.ros.org/noetic/Installation/Ubuntu">noetic&#x2F;Installation&#x2F;Ubuntu - ROS Wiki</a></p><p><strong>zhihu</strong> <a href="!https://zhuanlan.zhihu.com/p/515361781">Ubuntu20.04.4安装ROS Noetic详细教程</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> ROS </tag>
            
            <tag> Gazebo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SD模块以及FATFS文件系统</title>
      <link href="/2023/02/20/SD%E6%A8%A1%E5%9D%97%E4%BB%A5%E5%8F%8AFATFS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/02/20/SD%E6%A8%A1%E5%9D%97%E4%BB%A5%E5%8F%8AFATFS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p>23科创杯模块, 使用SD卡读写, SPI通讯协议</p><span id="more"></span><hr><h2 id="某些资料"><a href="#某些资料" class="headerlink" title="某些资料"></a>某些资料</h2><blockquote><p>CMD0 使SD卡进入空闲模式</p><p>​正确情况：返回1，但是返回了0</p><p>CMD8 查看SD卡版本，1 为2.0</p><p>CMD55 </p><p>CMD41</p><p>CMD58</p></blockquote><ul><li><p>将初始化函数放进disk文件中，挂载出来是13，</p></li><li><p>外面初始化，里面初始化，挂在出来是13</p></li><li><p>外面初始化，里面不初始化，挂出来是3</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> STM32 </tag>
            
            <tag> 模块 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>电机驱动</title>
      <link href="/2023/01/31/%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8/"/>
      <url>/2023/01/31/%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>电机驱动原理、TB6612接线、PID</p><span id="more"></span><h2 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h2><p>电机的正转比反转转速更快</p><p>正转满速：4900&#x2F;0.5s</p><p>反转满速：-5200&#x2F;0.5s</p><h2 id="遇到问题"><a href="#遇到问题" class="headerlink" title="遇到问题"></a>遇到问题</h2><ul><li><p>创建了野指针，导致程序无法正常运行</p></li><li><p>使用scanf</p><ul><li>用了scanf，不需要再使用中断接收，中断回调这些函数了，记得子啊cube开启串口中断就行了，直接调用scanf就行了</li><li>还有这里的scanf和C里面的不一样，在格式输入里没有字符</li><li>即使是写成scanf(“kp&#x3D;%d”),scanf(“%d,%d”)，这种形式都不行</li><li>不过scanf(“%d%d%d”)，输入的时候可以写1，1，1 。中间可以加逗号</li></ul></li><li></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 模块 </tag>
            
            <tag> 电机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝牙小车之改bug</title>
      <link href="/2023/01/09/%E8%93%9D%E7%89%99%E5%B0%8F%E8%BD%A6%E4%B9%8B%E6%94%B9bug/"/>
      <url>/2023/01/09/%E8%93%9D%E7%89%99%E5%B0%8F%E8%BD%A6%E4%B9%8B%E6%94%B9bug/</url>
      
        <content type="html"><![CDATA[<p>经典写代码半小时，改bug两小时</p><span id="more"></span><h2 id="串口接收中断"><a href="#串口接收中断" class="headerlink" title="串口接收中断"></a>串口接收中断</h2><blockquote><p>在cube配置UART的时候,忘记在中断接收那里✔了…</p></blockquote><h2 id="串口接收数据过程"><a href="#串口接收数据过程" class="headerlink" title="串口接收数据过程"></a>串口接收数据过程</h2><blockquote><p>发送数据时,是整体打包发送.(在中断回调函数中)在接收的时候,是一位一位读取的,在检测到后面两个截止位的时候,就会停止接收,进入下一个任务.</p><p>如果在检测到截止位就立即清空数据包, 那么在外面的大循环中就无法判断到接收到的数据包, 应该在执行完判断任务后再清空.</p></blockquote><h2 id="串口接收到的数据包"><a href="#串口接收到的数据包" class="headerlink" title="串口接收到的数据包"></a>串口接收到的数据包</h2><blockquote><p>通过普通的usb转串口模块,接收到的数据包有两个截止位(0X0D,0X0A)</p><p>但是用蓝牙通信发送的,只是软件上配置的数据,没有加截止位</p></blockquote><h2 id="printf的重定向"><a href="#printf的重定向" class="headerlink" title="printf的重定向"></a>printf的重定向</h2><p>在usart.c源文件中(针对于 cube),添加下面的代码</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">extern</span> UART_HandleTypeDef huart1;</span><br><span class="line"><span class="comment">//只重定向到了UART1</span></span><br><span class="line"><span class="comment">//重定向printf函数到串口</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">fputc</span><span class="params">(<span class="type">int</span> ch,FILE* f)</span>&#123;</span><br><span class="line">  HAL_UART_Transmit(&amp;huart1,(<span class="type">uint8_t</span>* )&amp;ch,<span class="number">1</span>,<span class="number">1000</span>);<span class="comment">//注意这里的int类型的ch,要强制转换一下类型</span></span><br><span class="line">  <span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重定向scanf函数到串口</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">fgetc</span><span class="params">(FILE* F)</span>&#123;</span><br><span class="line">  <span class="type">uint8_t</span> ch_r = <span class="number">0</span>;</span><br><span class="line">  HAL_UART_Receive(&amp;huart1,&amp;ch_r,<span class="number">1</span>,<span class="number">0xffff</span>);</span><br><span class="line">  <span class="keyword">return</span> ch_r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>重定向原理: printf默认输出设备是显示器终端,如果要显示到串口或者lcd之类上,就要重定向.</p><p><strong>注意</strong> : 还要在keil上勾选use microlib</p></blockquote><h2 id="sizeof的计算"><a href="#sizeof的计算" class="headerlink" title="sizeof的计算"></a>sizeof的计算</h2><blockquote><p>sizeof计算的是定义到的数组长度,也就是定义了多少,计算出来就是多少  .</p><p>还有一个计算是实际的长度,忘记是什么函数了</p><ul><li>如果里面传的是指针的话，这就是另一种情况了</li></ul></blockquote><h2 id="STM32cube配置出现中文乱码（错误的）"><a href="#STM32cube配置出现中文乱码（错误的）" class="headerlink" title="STM32cube配置出现中文乱码（错误的）"></a>STM32cube配置出现中文乱码（错误的）</h2><p>在Windows的环境变量中加入这个, 这种方法目前还没测试过.</p><blockquote><ul><li>变量名称：JAVA_TOOL_OPTIONS</li><li>变量值：-Dfile.encoding &#x3D; UTF-8</li></ul></blockquote><h2 id="PID-的那些事"><a href="#PID-的那些事" class="headerlink" title="PID 的那些事"></a>PID 的那些事</h2><h3 id="Question："><a href="#Question：" class="headerlink" title="Question："></a>Question：</h3><ul><li>如果在空转的时候，调好的pid，落地后，会不会影响结果？</li><li></li></ul><h2 id="模块化编程问题"><a href="#模块化编程问题" class="headerlink" title="模块化编程问题"></a>模块化编程问题</h2><p>函数调用之间的问题，传参问题，数据处理之后的操作</p>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> STM32 </tag>
            
            <tag> HAL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HAL之UART</title>
      <link href="/2023/01/07/HAL%E4%B9%8BUART/"/>
      <url>/2023/01/07/HAL%E4%B9%8BUART/</url>
      
        <content type="html"><![CDATA[<p>UART常用函数，HAL库的串口中断流程</p><span id="more"></span><hr><p>HAL_UART_Transmit(); 串口发送数据，使用超时管理机制<br>HAL_UART_Transmit_IT();    串口中断模式发送<br>HAL_UART_Transmit_DMA();       串口DMA模式发送</p><p>HAL_UART_Receive_IT();     串口中断模式接收<br>HAL_UART_Receive();  串口接收数据，使用超时管理机制<br>HAL_UART_Transmit_DMA();   串口DMA模式接收</p><h3 id="串口中断流程"><a href="#串口中断流程" class="headerlink" title="串口中断流程"></a>串口中断流程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HAL_UART_Receive_IT//中断接收函数</span><br><span class="line">USART2_IRQHandler(void)//中断服务函数</span><br><span class="line">HAL_UART_IRQHandler(*huart)//中断处理函数</span><br><span class="line">UART_Receive_IT(*huart)//接收函数</span><br><span class="line">HAL_UART_RxCpltCallback(huart)//中断回调函数(要自己修改)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">A(中断接收函数)--&gt;B(中断服务函数)--&gt;C(中断处理函数)--&gt;D(接收函数)--&gt;E(中断回调函数)--&gt;A(中断接收函数)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> STM32 </tag>
            
            <tag> HAL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HAL之GPIO</title>
      <link href="/2023/01/07/HAL%E4%B9%8BGPIO/"/>
      <url>/2023/01/07/HAL%E4%B9%8BGPIO/</url>
      
        <content type="html"><![CDATA[<p>常用的GPIO函数以及工作模式</p><span id="more"></span><hr><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><h4 id="输入函数"><a href="#输入函数" class="headerlink" title="输入函数"></a>输入函数</h4><blockquote><p>HAL_GPIO_ReadPin()&#x2F;&#x2F;读取引脚电平</p></blockquote><h4 id="输出函数"><a href="#输出函数" class="headerlink" title="输出函数"></a>输出函数</h4><blockquote><p>HAL_GPIO_WritePin()&#x2F;&#x2F;写入高低电平</p><p>HAL_GPIO_TogglePin()&#x2F;&#x2F;反转电平</p></blockquote><h4 id="中断函数"><a href="#中断函数" class="headerlink" title="中断函数"></a>中断函数</h4><blockquote><p>HAL_GPIO_EXTI_IRQHandler()&#x2F;&#x2F;外部中断服务函数</p><p>HAL_GPIO_EXTI_Callback()&#x2F;&#x2F;外部中断回调函数</p></blockquote><h2 id="工作模式"><a href="#工作模式" class="headerlink" title="工作模式"></a>工作模式</h2><h3 id="输入模式GPIO-Input"><a href="#输入模式GPIO-Input" class="headerlink" title="输入模式GPIO_Input"></a>输入模式GPIO_Input</h3><p>浮空输入</p><blockquote><p>引脚电平是真实的外部连接器件电压，电平有不确定性</p></blockquote><p>上拉输入</p><blockquote><p>默认通过电阻上拉到VCC,不接外部器件时可以读出高电平</p></blockquote><p>下拉输入</p><blockquote><p>默认通过电阻下拉到GND,不接外部器件时可以读出低电平</p></blockquote><h3 id="输出模式"><a href="#输出模式" class="headerlink" title="输出模式"></a>输出模式</h3><p>推挽(push pull)</p><blockquote><p>一种使用一对选择性地从相连负载灌电流或者拉电流的器件的电路。</p></blockquote><p>开漏(open drain)</p><blockquote><p>高电平时没有驱动能力，需要借助外部上拉电阻完成对外驱动。</p></blockquote><p>浮空(no-pull-)</p><blockquote><p>引脚电平是真实的外部连接器件电压，电平有不确定性</p></blockquote><p>上拉</p><blockquote><p>默认通过电阻上拉到VCC,不接外部器件时可以输出高电平</p></blockquote><p>下拉</p><blockquote><p>默认通过电阻下拉到GND,不接外部器件时可以输出低电平 </p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> STM32 </tag>
            
            <tag> HAL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝牙模块HC-05</title>
      <link href="/2023/01/07/%E8%93%9D%E7%89%99%E6%A8%A1%E5%9D%97HC-05/"/>
      <url>/2023/01/07/%E8%93%9D%E7%89%99%E6%A8%A1%E5%9D%97HC-05/</url>
      
        <content type="html"><![CDATA[<p>HC-05蓝牙模块基本原理及使用方法</p><span id="more"></span><hr><h3 id="波特率"><a href="#波特率" class="headerlink" title="波特率"></a>波特率</h3><ol><li>AT测试的波特率默认为38400,1停止位,8数据位</li><li>蓝牙通信波特率默认为9600,0,0</li></ol><h3 id="AT测试"><a href="#AT测试" class="headerlink" title="AT测试"></a>AT测试</h3><blockquote><p>接线: </p><ul><li><p>GND-&gt;GND</p></li><li><p>RXD-&gt;TXD</p></li><li><p>TXD-&gt;RXD</p></li><li><p>VCC-&gt;5V</p></li><li><p>EN和STATE不接</p></li><li><p><strong>注意: 模块上的VCC不能接3.3V</strong>, 资料说不可以，但是我接VCC和3V3都没问题。</p><p>按住模块上的按键再去供电, 进入慢闪(一秒一次)模式，即为AT测试</p></li></ul></blockquote><h3 id="AT测试命令"><a href="#AT测试命令" class="headerlink" title="AT测试命令"></a>AT测试命令</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 先输入AT，当返回OK时，代表进入AT测试</span><br><span class="line">AT+VERSION<span class="comment">//当前版本</span></span><br><span class="line">AT+ORGL<span class="comment">//恢复出厂设置</span></span><br><span class="line">AT+RESET<span class="comment">//复位</span></span><br><span class="line">AT+NAME<span class="comment">//蓝牙名字</span></span><br><span class="line">AT+PSWD<span class="comment">//连接密码</span></span><br><span class="line">AT+ROLE<span class="comment">//模式选择</span></span><br><span class="line">    <span class="number">1</span>：从机</span><br><span class="line">    <span class="number">2</span>：主机</span><br><span class="line">    <span class="number">3</span>：回环</span><br><span class="line">AT+UART<span class="comment">//波特率</span></span><br><span class="line">AT+ADDR<span class="comment">//蓝牙地址码</span></span><br><span class="line">AT+STATE<span class="comment">//当前工作状态</span></span><br><span class="line">AT+DISC<span class="comment">//断开连接</span></span><br><span class="line">AT+RNAME<span class="comment">//获取远程蓝牙设备名称</span></span><br><span class="line">AT+ADCN<span class="comment">//获取蓝牙配对表中设备个数</span></span><br><span class="line">......</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="蓝牙连接"><a href="#蓝牙连接" class="headerlink" title="蓝牙连接"></a>蓝牙连接</h3><p>AT测试，查询完相应数据后，拔掉电源。这次不用按按键，直接插电。模块的灯快闪，进入等待连接状态。</p><blockquote><p>手机打开<a href="https://pan.baidu.com/s/165RPnBSNWQYb76hcuZfKIg?pwd=6666">蓝牙调试器</a> , <a href="https://www.jianshu.com/p/1a8262492619">蓝牙调试器介绍</a></p><p>找到设备, 默认的连接密码为1234.</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 模块 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>L298N驱动</title>
      <link href="/2023/01/06/L298N%E9%A9%B1%E5%8A%A8/"/>
      <url>/2023/01/06/L298N%E9%A9%B1%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>L298N原理图及驱动方式</p><span id="more"></span><hr><center><h1 style="color:yellow">    L298N    </h1></center><h3 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h3><div align = "center"><img src="https://pic2.zhimg.com/80/v2-625094b40f2c5230af1b70f5e3c6ba35_1440w.webp"><hr><img src="https://pic4.zhimg.com/80/v2-8fb3efbd0d82669a496a179a46655e47_1440w.webp"><hr><img src="https://pic2.zhimg.com/80/v2-8ed7420890b8dc5b3dd5f0b5c02a7b11_1440w.webp"></div><h3 id="接线方式"><a href="#接线方式" class="headerlink" title="接线方式"></a>接线方式</h3><blockquote><ul><li><p>工作电压: 9~12v</p></li><li><p>将电池盒或者锂电池的<strong>正极</strong>接到上图的<strong>vcc</strong></p></li><li><p>如果安装了5v跳线帽, 5v接口是用来给单片机供电的, 这种情况下, 供电电源的GND要分两条, 模块和单片机共地</p><blockquote><p>如果用5V来给单片机供电的话, 可能会出问题, 因为没有稳压, 可能会有掉压的情况.</p></blockquote></li><li><p>电机分别接上图8, 9 引脚7</p></li></ul></blockquote><h3 id="驱动方式"><a href="#驱动方式" class="headerlink" title="驱动方式"></a>驱动方式</h3><table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">电机</td><td align="center">旋转方式</td><td align="center">IN1</td><td align="center">IN2</td><td align="center">IN3</td><td align="center">IN4</td></tr><tr><td align="center">M1</td><td align="center">正转</td><td align="center">高</td><td align="center">低</td><td align="center">&#x2F;</td><td align="center">&#x2F;</td></tr><tr><td align="center">(左)</td><td align="center">反转</td><td align="center">低</td><td align="center">高</td><td align="center">&#x2F;</td><td align="center">&#x2F;</td></tr><tr><td align="center"></td><td align="center">停止</td><td align="center">低</td><td align="center">低</td><td align="center">&#x2F;</td><td align="center">&#x2F;</td></tr><tr><td align="center">M2</td><td align="center">正转</td><td align="center">&#x2F;</td><td align="center">&#x2F;</td><td align="center">高</td><td align="center">低</td></tr><tr><td align="center">(右)</td><td align="center">反转</td><td align="center">&#x2F;</td><td align="center">&#x2F;</td><td align="center">低</td><td align="center">高</td></tr><tr><td align="center"></td><td align="center">停止</td><td align="center">&#x2F;</td><td align="center">&#x2F;</td><td align="center">低</td><td align="center">低</td></tr></tbody></table><blockquote><p>如果要用PWM调速的话, 要拔掉<strong>ENA</strong>和<strong>ENB</strong>的跳线帽, 将PWM输出到这两个引脚来实现PWM调速.</p><p>IN口控制正反转, EN口用来调速</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 模块 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
